{% extends "base.html" %}
{% block title %}Aparells – {{ competicio.nom }}{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
  <div class="card-surface">

    <div class="d-flex justify-content-between align-items-start mb-3">
      <div>
        <h2 class="mb-1">Aparells · {{ competicio.nom }}</h2>
        <div class="text-muted small">Selecciona i configura els aparells d’aquesta competició.</div>
      </div>

      <div class="d-flex gap-2">
        <a class="btn btn-sm btn-outline-secondary"
           href="{% url 'trampoli_config' competicio.id %}">Configuració</a>
        <a class="btn btn-sm btn-outline-primary"
           href="{% url 'trampoli_aparell_create' competicio.id %}">Afegir aparell</a>
        <a class="btn btn-sm btn-info"
           href="{% url 'trampoli_notes_home' competicio.id %}">Anar a notes</a>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-sm table-bordered align-middle">
        <thead class="table-light">
          <tr>
            <th style="width:70px;">Ordre</th>
            <th>Aparell</th>
            <th style="width:120px;">Elements</th>
            <th style="width:140px;">Mode execució</th>
            <th style="width:240px;">Ítems</th>
            <th style="width:90px;">Actiu</th>
            <th style="width:120px;"></th>
          </tr>
        </thead>
        <tbody>
          {% for ca in aparells_cfg %}
            <tr>
              <td class="text-center">{{ ca.ordre }}</td>
              <td class="fw-semibold">{{ ca.aparell.nom }}</td>
              <td class="text-center">{{ ca.nombre_elements }}</td>
              <td class="text-center">{{ ca.get_mode_execucio_display }}</td>
              <td class="small">
                {% if ca.te_execucio %}<span class="badge badge-light">Exec</span>{% endif %}
                {% if ca.te_dificultat %}<span class="badge badge-light">Dif</span>{% endif %}
                {% if ca.te_tof %}<span class="badge badge-light">ToF</span>{% endif %}
                {% if ca.te_hd %}<span class="badge badge-light">HD</span>{% endif %}
                {% if ca.te_penalitzacio %}<span class="badge badge-light">Pen</span>{% endif %}
              </td>
              <td class="text-center">
                {% if ca.actiu %}
                  <span class="badge badge-success">Sí</span>
                {% else %}
                  <span class="badge badge-secondary">No</span>
                {% endif %}
              </td>
              <td class="text-right">
                <a class="btn btn-sm btn-outline-secondary"
                   href="{% url 'trampoli_aparell_update' competicio.id ca.id %}">Editar</a>
              </td>
            </tr>
          {% empty %}
            <tr><td colspan="7" class="text-muted">No hi ha aparells configurats.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>
{% endblock %}
